<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
        <script src="/GrafikBar.js" defer></script>
    </head>
    <body>

    
        <h1 >Halaman Grafik Bar</h1>
        
        <form method="get" action="/GrafikBar" onchange="submit()">
            <label for="Buku">Silahkan pilih Buku :</label><br>
            <select name="Buku" id="Buku">
              <%if(buku==1){%>
                <option value="1" selected="selected">1</option>
              <%}else{%>
                <option value="1">1</option>
              <%}%>
              <%if(buku==2){%>
                <option value="2" selected="selected">2</option>
              <%}else{%>
                <option value="2" >2</option>
              <%}%>
              <%if(buku==3){%>
                <option value="3" selected="selected">3</option>
              <%}else{%>
                <option value="3">3</option>
              <%}%>
              <%if(buku==4){%>
                <option value="4" selected="selected">4</option>
              <%}else{%>
                <option value="4" >4</option>
              <%}%>
              <%if(buku==5){%>
                <option value="5" selected="selected">5</option>
              <%}else{%>
                <option value="5" >5</option>
              <%}%>
                
            </select>
        </form>
        <%let x = []%>
        <%let y = []%>
        <%for(let i of hasil){%>
            <%x.push(i.target)%>
            <%y.push(i.weight)%>
        <%}%>
        <h3>TOP-10 karakter yang paling banyak berinteraksi dengan karakter lain</h3>
        <canvas id="hasilGrafik" width="5" height="2"></canvas>
        
    <script>
        const ctx = document.getElementById('hasilGrafik').getContext('2d');
        let xValues = <%-JSON.stringify(x)%>;
        let yValues = <%-JSON.stringify(y)%>;
        // for(let i=0;i<10;i++){
        //     xValues[0]=xValues[0].replace('&#34;','"')
        // }
            const barColors = ["red","yellow","blue","orange","white","black","black","black","black","black"];
       const chart = new Chart(ctx,{
      type : "bar",
      data :{
        labels : xValues,
        datasets :[{
          backgroundColor : barColors,
          data : yValues
        }]
      },
      options:{
        scales:{
          yAxes:[{
            ticks :{
              beginAtZero : true
            }
          }]
        },
        legend : {display : false},
        title :{
          display : true,
          text : "Hasil Grafik"
        }
      }
    })
    </script>
    </body>
</html>
           
